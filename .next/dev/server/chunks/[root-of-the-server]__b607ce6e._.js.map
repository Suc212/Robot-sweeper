{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/H-GB%20VIDEO%20EDITOR/Desktop/DEV/Robot-sweeper-landing-page/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\"\r\nimport { getFirestore } from \"firebase/firestore\"\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n}\r\n\r\n// Initialize Firebase (singleton pattern)\r\nconst app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig)\r\nexport const db = getFirestore(app)\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,iLAAO,IAAG,MAAM,GAAG,IAAI,IAAA,gLAAM,MAAK,IAAA,uLAAa,EAAC;AACrD,MAAM,KAAK,IAAA,mLAAY,EAAC"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/H-GB%20VIDEO%20EDITOR/Desktop/DEV/Robot-sweeper-landing-page/app/api/orders/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\nimport { Resend } from \"resend\"\r\nimport { z } from \"zod\"\r\nimport { db } from \"@/lib/firebase\"\r\nimport { collection, addDoc, serverTimestamp } from \"firebase/firestore\"\r\n\r\nconst resendApiKey = process.env.RESEND_API_KEY\r\nif (!resendApiKey) {\r\n  console.error(\"RESEND_API_KEY is not set in environment variables.\")\r\n}\r\nconst resend = new Resend(resendApiKey)\r\n\r\nconst orderSchema = z.object({\r\n  firstName: z.string().min(1, \"First name is required\"),\r\n  lastName: z.string().min(1, \"Last name is required\"),\r\n  address: z.string().min(1, \"Address is required\"),\r\n  phone: z.string().min(1, \"Phone number is required\"),\r\n  whatsapp: z.string().min(1, \"WhatsApp number is required\"),\r\n  quantity: z.string().min(1, \"Quantity is required\"),\r\n  totalPrice: z.string().min(1, \"Total price is required\"),\r\n  discount: z.string().optional(),\r\n})\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n    const orderData = orderSchema.parse(body)\r\n\r\n    // Save to Firestore\r\n    const orderRef = await addDoc(collection(db, \"orders\"), {\r\n      ...orderData,\r\n      quantity: Number.parseInt(orderData.quantity),\r\n      totalPrice: Number.parseInt(orderData.totalPrice),\r\n      discount: Number.parseInt(orderData.discount || \"0\"),\r\n      status: \"pending\",\r\n      createdAt: serverTimestamp(),\r\n    })\r\n\r\n    // Send admin notification email\r\n    const adminEmail = process.env.ADMIN_EMAIL || \"allthegoodthings14@gmail.com\"\r\n    const { error: adminError } = await resend.emails.send({\r\n      from: \"onboarding@resend.dev\",\r\n      to: [adminEmail],\r\n      subject: \"New SweepBot Pro Order Received\",\r\n      html: `\r\n        <h2>New Order Notification</h2>\r\n        <p><strong>Order ID:</strong> ${orderRef.id}</p>\r\n        <p><strong>Customer Details:</strong></p>\r\n        <ul>\r\n          <li><strong>Name:</strong> ${orderData.firstName} ${orderData.lastName}</li>\r\n          <li><strong>Phone:</strong> ${orderData.phone}</li>\r\n          <li><strong>WhatsApp:</strong> ${orderData.whatsapp}</li>\r\n          <li><strong>Address:</strong> ${orderData.address}</li>\r\n        </ul>\r\n        <p><strong>Order Details:</strong></p>\r\n        <ul>\r\n          <li><strong>Quantity:</strong> ${orderData.quantity} unit(s)</li>\r\n          <li><strong>Total Price:</strong> GH₵${Number.parseInt(orderData.totalPrice).toLocaleString()}</li>\r\n          <li><strong>Discount:</strong> GH₵${Number.parseInt(orderData.discount || \"0\").toLocaleString()}</li>\r\n          <li><strong>Payment:</strong> Cash on Delivery</li>\r\n          <li><strong>Order Time:</strong> ${new Date().toLocaleString()}</li>\r\n        </ul>\r\n      `,\r\n    })\r\n\r\n    if (adminError) {\r\n      console.error(\"Admin email sending error:\", adminError)\r\n    }\r\n\r\n    return NextResponse.json({ success: true, orderId: orderRef.id })\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json({ error: \"Invalid input\", details: error.errors }, { status: 400 })\r\n    }\r\n\r\n    console.error(\"Order API error:\", error)\r\n    const message = error instanceof Error ? error.message : \"An unknown error occurred\"\r\n    return NextResponse.json({ error: \"Internal server error\", details: message }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AAAA;;;;;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,cAAc;AAC/C,IAAI,CAAC,cAAc;IACjB,QAAQ,KAAK,CAAC;AAChB;AACA,MAAM,SAAS,IAAI,oJAAM,CAAC;AAE1B,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAC3B,WAAW,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC7B,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,OAAO,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,YAAY,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC9B,UAAU,yKAAC,CAAC,MAAM,GAAG,QAAQ;AAC/B;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,YAAY,YAAY,KAAK,CAAC;QAEpC,oBAAoB;QACpB,MAAM,WAAW,MAAM,IAAA,6KAAM,EAAC,IAAA,iLAAU,EAAC,uHAAE,EAAE,WAAW;YACtD,GAAG,SAAS;YACZ,UAAU,OAAO,QAAQ,CAAC,UAAU,QAAQ;YAC5C,YAAY,OAAO,QAAQ,CAAC,UAAU,UAAU;YAChD,UAAU,OAAO,QAAQ,CAAC,UAAU,QAAQ,IAAI;YAChD,QAAQ;YACR,WAAW,IAAA,sLAAe;QAC5B;QAEA,gCAAgC;QAChC,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;QAC9C,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YACrD,MAAM;YACN,IAAI;gBAAC;aAAW;YAChB,SAAS;YACT,MAAM,CAAC;;sCAEyB,EAAE,SAAS,EAAE,CAAC;;;qCAGf,EAAE,UAAU,SAAS,CAAC,CAAC,EAAE,UAAU,QAAQ,CAAC;sCAC3C,EAAE,UAAU,KAAK,CAAC;yCACf,EAAE,UAAU,QAAQ,CAAC;wCACtB,EAAE,UAAU,OAAO,CAAC;;;;yCAInB,EAAE,UAAU,QAAQ,CAAC;+CACf,EAAE,OAAO,QAAQ,CAAC,UAAU,UAAU,EAAE,cAAc,GAAG;4CAC5D,EAAE,OAAO,QAAQ,CAAC,UAAU,QAAQ,IAAI,KAAK,cAAc,GAAG;;2CAE/D,EAAE,IAAI,OAAO,cAAc,GAAG;;MAEnE,CAAC;QACH;QAEA,IAAI,YAAY;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS,SAAS,EAAE;QAAC;IACjE,EAAE,OAAO,OAAO;QACd,IAAI,iBAAiB,yKAAC,CAAC,QAAQ,EAAE;YAC/B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAiB,SAAS,MAAM,MAAM;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC5F;QAEA,QAAQ,KAAK,CAAC,oBAAoB;QAClC,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACzD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAAyB,SAAS;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC/F;AACF"}}]
}